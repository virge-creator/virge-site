---
import Layout from './Layout.astro';
import CTA from '../components/CTA.astro';

const { frontmatter, rawContent } = Astro.props;
const readingTime = rawContent ? Math.ceil(rawContent().split(/\s+/).length / 200) : 5;
const base = import.meta.env.BASE_URL;
---
<Layout title={frontmatter.title} description={frontmatter.description}>
  <article class="blog-post">
    <div class="container">
      <a href={`${base}blog/`} class="back-link">← Back to Blog</a>
      <header class="post-header">
        <h1>{frontmatter.title}</h1>
        <div class="post-meta">
          <span>{frontmatter.author}</span>
          <span>·</span>
          <time>{new Date(frontmatter.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</time>
          <span>·</span>
          <span>{readingTime} min read</span>
        </div>
      </header>
      <div class="post-content">
        <slot />
      </div>
      <CTA />
    </div>
  </article>
</Layout>
