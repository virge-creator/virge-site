---
import Layout from './Layout.astro';
import CTA from '../components/CTA.astro';
import type { Lang } from '../i18n';
import { t } from '../i18n';

const { frontmatter, rawContent } = Astro.props;
const lang: Lang = frontmatter.lang || 'en';
const i = t(lang);
const readingTime = rawContent ? Math.ceil(rawContent().split(/\s+/).length / 200) : 5;
const dateLocale = lang === 'nl' ? 'nl-NL' : 'en-US';
---
<Layout title={frontmatter.title} description={frontmatter.description} lang={lang}>
  <article class="blog-post">
    <div class="container">
      <a href={`/${lang}/blog/`} class="back-link">{i.blog.backToBlog}</a>
      <header class="post-header">
        <h1>{frontmatter.title}</h1>
        <div class="post-meta">
          <span>{frontmatter.author}</span>
          <span>·</span>
          <time>{new Date(frontmatter.date).toLocaleDateString(dateLocale, { year: 'numeric', month: 'long', day: 'numeric' })}</time>
          <span>·</span>
          <span>{readingTime} {i.blog.minRead}</span>
        </div>
      </header>
      <div class="post-content">
        <slot />
      </div>
      <CTA lang={lang} />
    </div>
  </article>
</Layout>
